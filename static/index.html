<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Eleandro Gaioski - AI Resume</title>
  <meta name="description" content="Fale com meu assistente virtual"/>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: { extend: { colors: { primary: "#0ea5e9", dark: "#0f172a" } } }
    }
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <style>
    #messages { scrollbar-width: thin; }
    #messages::-webkit-scrollbar { width: 6px; }
    #messages::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 10px; }
    @keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
    .b1 { animation: bounce 1.4s infinite; }
    .b2 { animation: bounce 1.4s infinite 0.2s; }
    .b3 { animation: bounce 1.4s infinite 0.4s; }
    @keyframes fadeIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
    .fadeIn { animation: fadeIn 0.4s ease-out; }
  </style>
  <style>
¬† ¬† #messages { scrollbar-width: thin; }
¬† ¬† #messages::-webkit-scrollbar { width: 6px; }
¬† ¬† #messages::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 10px; }
¬† ¬† @keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
¬† ¬† .b1 { animation: bounce 1.4s infinite; }
¬† ¬† .b2 { animation: bounce 1.4s infinite 0.2s; }
¬† ¬† .b3 { animation: bounce 1.4s infinite 0.4s; }
¬† ¬† @keyframes fadeIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }
¬† ¬† .fadeIn { animation: fadeIn 0.4s ease-out; }
    
    /* üåü NOVO: Estilos para melhorar a leitura de elementos Markdown dentro da bolha */
    .bg-gray-200 > p > ul,
    .bg-gray-200 > p > ol {
      /* Adiciona espa√ßamento interno para listas */
      padding-left: 1.5rem; /* 6px */
      margin-top: 0.5rem; /* 8px */
    }

    .bg-gray-200 > p > ul > li,
    .bg-gray-200 > p > ol > li {
        /* Adiciona espa√ßamento entre itens da lista */
        margin-bottom: 0.25rem; /* 4px */
    }

    .bg-gray-200 > p > pre {
        /* Estilo para blocos de c√≥digo */
        background-color: #e2e8f0; /* gray-200, mas mais escuro */
        padding: 0.75rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        font-size: 0.9em;
    }
¬† </style>
</head>
<body class="bg-gradient-to-br from-gray-50 via-blue-50 to-gray-100 min-h-screen flex flex-col text-gray-800">
  
	<header class="bg-white shadow-lg border-b sticky top-0 z-50">
		<div class="max-w-7xl mx-auto px-4 py-4 flex flex-col lg:flex-row items-center justify-between gap-4">
		  <div class="flex items-center gap-4 w-full lg:w-auto justify-center lg:justify-start">
			<img src="/static/images/foto-perfil.jpg" alt="Eleandro Gaioski" class="w-16 h-16 sm:w-16 sm:h-16 rounded-full ring-4 ring-primary/30 object-cover">    
			<div>
			  <h1 class="text-2xl sm:text-3xl font-bold text-dark">Eleandro Gaioski</h1>
			  <p class="text-base text-primary" data-t="title">Senior Data Scientist ‚Ä¢ Consultant ‚Ä¢ Agrotech IoT Specialist ‚Ä¢ Python ‚Ä¢ AI ‚Ä¢ Ex-CTO</p>
			</div>
		  </div>
		  <div class="flex flex-col sm:flex-row items-center gap-4">
			<div class="flex bg-gray-100 rounded-full p-1 shadow-md">
			  <button onclick="setLang('en')" id="btn-en" class="px-4 py-2 rounded-full text-sm font-medium flex items-center gap-2 transition hover:bg-gray-200">
				<img src="https://flagcdn.com/16x12/us.png" alt="EN"> EN
			  </button>
			  <button onclick="setLang('pt')" id="btn-pt" class="px-4 py-2 rounded-full text-sm font-medium flex items-center gap-2 bg-primary text-white transition">
				<img src="https://flagcdn.com/16x12/br.png" alt="PT"> PT
			  </button>
			</div>
			<div class="grid grid-cols-2 gap-2 w-full sm:w-auto"> 
				<a href="https://linkedin.com/in/gaioski" target="_blank" class="bg-[#0077b5] hover:bg-[#005582] text-white px-4 py-2 rounded-full text-sm flex items-center justify-center gap-2 transition shadow-sm whitespace-nowrap"><i class="fab fa-linkedin-in"></i> LinkedIn</a>
				<a href="https://github.com/gaioski" target="_blank" class="bg-[#333] hover:bg-black text-white px-4 py-2 rounded-full text-sm flex items-center justify-center gap-2 transition shadow-sm whitespace-nowrap"><i class="fab fa-github"></i> GitHub</a>
				<a href="mailto:gaioski@gmail.com" class="bg-[#db4437] hover:bg-[#c53929] text-white px-4 py-2 rounded-full text-sm flex items-center justify-center gap-2 transition shadow-sm whitespace-nowrap"><i class="fas fa-envelope"></i> Email</a>
				<a href="https://wa.me/5541988633383" target="_blank" class="bg-[#25D366] hover:bg-[#128C7E] text-white px-4 py-2 rounded-full text-sm flex items-center justify-center gap-2 transition shadow-sm whitespace-nowrap"><i class="fab fa-whatsapp"></i> WhatsApp</a>
			</div>
		  </div>
		</div>
  </header>
  
<main class="flex-1 max-w-7xl mx-auto w-full px-4 py-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
    
    <div class="lg:col-span-2 bg-white rounded-3xl shadow-2xl flex flex-col" style="height: calc(100vh - 180px);">
      <div class="bg-gradient-to-r from-primary to-blue-600 text-white p-4 text-center rounded-t-3xl">
        <h2 class="text-lg font-bold" data-t="chat-title">Assistente Virtual</h2>
      </div>
      
      <div id="messages" class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50">
        <div class="text-center text-gray-600 italic text-sm" data-t="welcome">
          Ol√°! Sou o assistente virtual do Eleandro. Pergunte qualquer coisa!
        </div>
      </div>
      
      <div id="typing-indicator" class="hidden p-4">
        <div class="flex justify-start">
          <div class="bg-gray-200 rounded-3xl px-6 py-3 shadow-md flex items-center gap-3">
            <div class="flex space-x-2"><div class="w-3 h-3 bg-gray-600 rounded-full b1"></div><div class="w-3 h-3 bg-gray-600 rounded-full b2"></div><div class="w-3 h-3 bg-gray-600 rounded-full b3"></div></div>
            <span id="typing-text" class="text-gray-700 font-medium">Pensando...</span>
          </div>
        </div>
      </div>
      
      <div class="p-4 bg-white border-t border-gray-200 rounded-b-3xl">
        <form id="form" class="flex gap-3">
          <input type="text" id="input" placeholder="Digite sua pergunta..." class="flex-1 px-5 py-3 rounded-full border border-gray-300 focus:outline-none focus:ring-4 focus:ring-primary/30 text-base shadow-sm">
          <button type="submit" id="send-btn" class="bg-primary hover:bg-blue-700 text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg transition transform hover:scale-105">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
          </button>
        </form>
      </div>
    </div>

    <div class="bg-white rounded-3xl shadow-xl p-6 border border-gray-200 overflow-y-auto flex flex-col" style="height: calc(100vh - 180px);">
      <h3 class="font-bold text-lg mb-4 sticky top-0 bg-white pb-2 border-b border-gray-100" data-t="quick-questions">Perguntas r√°pidas</h3>
      <div id="suggested-questions" class="space-y-3 flex-1">
        </div>
    </div>

  </main>
  
  <script>
    const translations = {
      en: {
        "chat-title": "Virtual Assistant",
		title: "Senior Data Scientist ‚Ä¢ Consultant ‚Ä¢ Agrotech IoT Specialist ‚Ä¢ Python ‚Ä¢ AI ‚Ä¢ Ex-CTO",
        welcome: "Hi! I'm Eleandro's virtual assistant. Ask me anything!",
        placeholder: "Ask your question...",
        "quick-questions": "Quick Questions",
        questions: [
          "Tell me about your education",
          "What are your most recent professional experiences?",
          "What are your main technologies?",
          "What makes you stand out?",
          "Have you worked with AI or LLMs?",
          "Have you led teams or projects?",
          "What do you do in your free time?",
		  "Do you work remotely?",
        ]
      },
      pt: {
        "chat-title": "Assistente Virtual",
		title: "Cientista de Dados S√™nior ‚Ä¢ Consultor ‚Ä¢ Especialista em IoT para Agrotech ‚Ä¢ Python ‚Ä¢ IA ‚Ä¢ Ex-CTO",
        welcome: "Ol√°! Sou o assistente virtual do Eleandro. Pergunte qualquer coisa!",
        placeholder: "Digite sua pergunta...",
        "quick-questions": "Perguntas r√°pidas",
        questions: [
          "Fale sobre sua forma√ß√£o",
          "Conte-me sobre seus √∫ltimos trabalhos",
          "Quais suas principais tecnologias?",
          "Qual seu diferencial?",
          "J√° trabalhou com IA ou LLMs?",
          "J√° liderou equipes ou projetos?",
          "O que gosta de fazer nas horas vagas?",
		  "Voc√™ trabalha remotamente?",
        ]
      }
    };
    function setLang(lang) {
      document.documentElement.lang = lang === 'pt' ? 'pt-BR' : 'en';
      localStorage.setItem('lang', lang);
      document.getElementById('btn-en').classList.toggle('bg-primary', lang==='en');
      document.getElementById('btn-en').classList.toggle('text-white', lang==='en');
      document.getElementById('btn-pt').classList.toggle('bg-primary', lang==='pt');
      document.getElementById('btn-pt').classList.toggle('text-white', lang==='pt');
      const t = translations[lang];
      document.querySelectorAll('[data-t]').forEach(el => {
        const key = el.getAttribute('data-t');
        if (t[key]) el.textContent = t[key];
      });
      document.getElementById('input').placeholder = t.placeholder;
      document.getElementById('typing-text').textContent = lang==='pt' ? 'Pensando...' : 'Thinking...';
      const container = document.getElementById('suggested-questions');
      container.innerHTML = '';
      t.questions.forEach(q => {
        const btn = document.createElement('button');
        btn.className = "w-full text-left bg-blue-50 hover:bg-blue-100 text-blue-700 font-medium py-3 px-5 rounded-xl border border-blue-200 transition";
        btn.textContent = q;
        btn.onclick = () => send(q);
        container.appendChild(btn);
      });
    }
    setLang(localStorage.getItem('lang') || 'pt');
    const messages = document.getElementById('messages');
    const input = document.getElementById('input');
    const typing = document.getElementById('typing-indicator');
    const sendBtn = document.getElementById('send-btn');

    // Fun√ß√£o para adicionar a resposta (texto + CTAs)
    function addResponse(text, cta0, cta1) {
      // 1. Adiciona a mensagem de texto da IA
	  
      const htmlText = marked.parse(text).trim(); 
	  
      const textDiv = document.createElement('div');
      textDiv.className = `flex justify-start fadeIn`;
      textDiv.innerHTML = `<div class="bg-gray-200 text-gray-900 rounded-3xl px-6 py-4 max-w-base sm:max-w-base shadow-md">
        <p class="whitespace-pre-wrap leading-relaxed text-sm sm:text-base">${htmlText}</p>
      </div>`;
      messages.appendChild(textDiv);

      // 2. Adiciona os bot√µes de CTA (se existirem)
      if (cta0 || cta1) {
        const ctaDiv = document.createElement('div');
        ctaDiv.className = `flex justify-start pt-2 px-1 fadeIn`; // Espa√ßo entre a resposta e os bot√µes
        const buttonContainer = document.createElement('div');
        buttonContainer.className = "flex flex-col sm:flex-row gap-2 max-w-xs sm:max-w-xl"; // Cont√™iner para os bot√µes

        // Cria e adiciona o CTA 0
        if (cta0) {
          const btn0 = createCtaButton(cta0);
          buttonContainer.appendChild(btn0);
        }

        // Cria e adiciona o CTA 1
        if (cta1) {
          const btn1 = createCtaButton(cta1);
          buttonContainer.appendChild(btn1);
        }

        ctaDiv.appendChild(buttonContainer);
        messages.appendChild(ctaDiv);
      }
      
      messages.scrollTop = messages.scrollHeight;
    }

    // Fun√ß√£o auxiliar para criar o bot√£o de CTA
	function createCtaButton(ctaText) {
		const btn = document.createElement('button');
		// CLASSE CORRIGIDA: Removido 'whitespace-nowrap' e 'overflow-hidden text-ellipsis'.
		// Adicionado 'text-wrap' e 'text-center' para o alinhamento.
		btn.className = "bg-white border border-primary text-primary hover:bg-primary hover:text-white font-medium py-2 px-4 rounded-xl text-sm transition duration-300 shadow-sm w-full sm:w-64 text-wrap text-center";
		btn.textContent = ctaText;
		btn.onclick = () => send(ctaText); 
		btn.title = ctaText; 
		return btn;
	}

    // Fun√ß√£o para adicionar a mensagem do usu√°rio
    function addMessage(text, isUser = false) {
      const div = document.createElement('div');
      div.className = `flex ${isUser ? 'justify-end' : 'justify-start'} fadeIn`;
      div.innerHTML = `<div class="${isUser ? 'bg-primary text-white' : 'bg-gray-200 text-gray-900'} rounded-3xl px-6 py-4 max-w-xs sm:max-w-lg shadow-md">
        <p class="whitespace-pre-wrap leading-relaxed text-sm sm:text-base">${text.replace(/\n/g, '<br>')}</p>
      </div>`;
      messages.appendChild(div);
      messages.scrollTop = messages.scrollHeight;
    }

    async function send(question) {
      if (!question.trim()) return;
      addMessage(question, true);
      input.value = '';
      typing.classList.remove('hidden');
      sendBtn.disabled = true;
      try {
        const res = await fetch('/chat', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({message: question})
        });
        const data = await res.json();
        typing.classList.add('hidden');
        
        // CORRE√á√ÉO AQUI: Chamar addResponse com o texto e as CTAs
        addResponse(
            data.response || "Desculpe, n√£o consegui responder.", 
            data.call_action0 || null, // Passa null se n√£o vier
            data.call_action1 || null  // Passa null se n√£o vier
        );
      } catch (e) {
        console.error(e);
        typing.classList.add('hidden');
        addResponse("Erro de conex√£o. Tente novamente.");
      } finally {
        sendBtn.disabled = false;
      }
    }
    document.getElementById('form').addEventListener('submit', e => {
      e.preventDefault();
      send(input.value);
    });
  </script>
</body>
</html>